<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PNPtv ‚Äì Lifetime Pass - Solo $80 USD</title>
    <meta name="description" content="Acceso de por vida a PNPtv. Paga una vez, disfruta para siempre. Videos HD/4K, contenido exclusivo y m√°s.">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header .tagline {
            font-size: 1.5em;
            color: #ffd700;
            font-weight: bold;
        }

        .language-selector {
            text-align: center;
            margin: 30px 0;
        }

        .language-selector button {
            padding: 12px 30px;
            margin: 0 10px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .language-selector button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .language-selector button.active {
            background: #ffd700;
            color: #333;
        }

        .content {
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            margin: 20px 0;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .language {
            display: none;
        }

        .language.active {
            display: block;
        }

        .price-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .price-box .price {
            font-size: 3.5em;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .price-box .subtitle {
            font-size: 1.3em;
            margin-top: 10px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .feature .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .feature h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .payment-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 40px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .payment-section h2 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 30px;
        }

        .payment-links {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .payment-link {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s ease;
            display: block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .payment-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .payment-link.used {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .payment-link.used:hover {
            transform: none;
        }

        .pay-now-button {
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);
            color: #333;
            padding: 25px 60px;
            font-size: 1.5em;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pay-now-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.6);
            background: linear-gradient(135deg, #ffed4e 0%, #ffaa00 100%);
        }

        .pay-now-button:active {
            transform: translateY(-2px) scale(1.02);
        }

        .activation-section {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            padding: 40px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .activation-section h3 {
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .activation-section p {
            font-size: 1.2em;
            text-align: center;
            margin: 15px 0;
        }

        .activation-section .telegram-link {
            display: inline-block;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 30px;
            border-radius: 25px;
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.2em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .activation-section .telegram-link:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: scale(1.05);
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.3em;
        }

        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .no-links-message {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #ffd700;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.2em;
        }

        ul {
            list-style: none;
            padding: 20px;
        }

        ul li {
            padding: 10px 0;
            font-size: 1.1em;
        }

        ul li:before {
            content: "‚úì ";
            color: #ffd700;
            font-weight: bold;
            margin-right: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .header .tagline {
                font-size: 1.2em;
            }

            .price-box .price {
                font-size: 2.5em;
            }

            .content {
                padding: 20px;
            }

            .payment-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî• PNPtv Lifetime Pass üî•</h1>
            <p class="tagline">Paga una vez. Acceso para siempre.</p>
        </div>

        <div class="language-selector">
            <button onclick="showLanguage('es')" class="active" id="btn-es">üá™üá∏ Espa√±ol</button>
            <button onclick="showLanguage('en')" id="btn-en">üá∫üá∏ English</button>
        </div>

        <!-- Spanish Version -->
        <div id="es" class="language active">
            <div class="content">
                <h2 style="text-align: center; font-size: 2.5em; margin-bottom: 20px;">
                    Oferta Especial de Hoy
                </h2>

                <div class="price-box">
                    <h3>üíé Acceso de Por Vida</h3>
                    <div class="price">$80 USD</div>
                    <p class="subtitle">Pago √∫nico - Sin renovaciones - Sin mensualidades</p>
                </div>

                <div class="features">
                    <div class="feature">
                        <div class="icon">üìπ</div>
                        <h3>Videos HD/4K</h3>
                        <p>Contenido completo de Santino, Lex y sus boys en alta calidad</p>
                    </div>
                    <div class="feature">
                        <div class="icon">üî•</div>
                        <h3>Contenido PNP Real</h3>
                        <p>Latinos fumando y slameando - Sin censura, sin l√≠mites</p>
                    </div>
                    <div class="feature">
                        <div class="icon">üìç</div>
                        <h3>Qui√©n Est√° Cerca</h3>
                        <p>Conecta con miembros en tu zona geogr√°fica</p>
                    </div>
                    <div class="feature">
                        <div class="icon">ü§ñ</div>
                        <h3>Bot Avanzado</h3>
                        <p>Pagos instant√°neos, soporte 24/7 y perfil personalizado</p>
                    </div>
                </div>

                <h3 style="font-size: 2em; margin: 40px 0 20px; text-align: center;">
                    üî• Lo que obtienes:
                </h3>
                <ul>
                    <li>Acceso ilimitado y de por vida a todo el contenido</li>
                    <li>Actualizaciones y nuevo contenido sin costo adicional</li>
                    <li>Comunidad privada de Telegram con miembros verificados</li>
                    <li>Contenido exclusivo que no encontrar√°s en otro lugar</li>
                    <li>Funci√≥n de geolocalizaci√≥n para encuentros reales</li>
                    <li>Soporte prioritario 24/7</li>
                </ul>
            </div>

            <div class="payment-section">
                <h2>üí≥ Obt√©n tu Acceso de Por Vida Ahora</h2>
                <div style="text-align: center; margin: 30px 0;">
                    <button id="payNowBtn" class="pay-now-button" onclick="payNow()">
                        üí∞ PAGAR AHORA - $80 USD
                    </button>
                    <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                        ‚ÑπÔ∏è Si el enlace est√° expirado, intente de nuevo
                    </p>
                </div>
            </div>

            <div class="activation-section">
                <h3>üîë Activaci√≥n Post-Pago</h3>
                <p>Despu√©s de completar tu pago, recibir√°s un <strong>c√≥digo √∫nico</strong> por correo electr√≥nico.</p>
                <p>Env√≠a este c√≥digo a nuestro bot de Telegram para activar tu membres√≠a de por vida.</p>
                <div style="text-align: center;">
                    <a href="https://t.me/pnptv_bot" class="telegram-link" target="_blank">
                        üì± Abrir Bot de Telegram
                    </a>
                </div>
                <p style="margin-top: 20px; font-size: 1em;">
                    Una vez en el bot, usa el comando: <code style="background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 5px;">/activate TU_CODIGO</code>
                </p>
            </div>
        </div>

        <!-- English Version -->
        <div id="en" class="language">
            <div class="content">
                <h2 style="text-align: center; font-size: 2.5em; margin-bottom: 20px;">
                    Today's Special Offer
                </h2>

                <div class="price-box">
                    <h3>üíé Lifetime Access</h3>
                    <div class="price">$80 USD</div>
                    <p class="subtitle">One-time payment - No renewals - No monthly fees</p>
                </div>

                <div class="features">
                    <div class="feature">
                        <div class="icon">üìπ</div>
                        <h3>HD/4K Videos</h3>
                        <p>Full content from Santino, Lex & their boys in high quality</p>
                    </div>
                    <div class="feature">
                        <div class="icon">üî•</div>
                        <h3>Authentic PNP Content</h3>
                        <p>Latinos smoking & slamming - Raw, uncensored</p>
                    </div>
                    <div class="feature">
                        <div class="icon">üìç</div>
                        <h3>Who's Nearby</h3>
                        <p>Connect with members in your area</p>
                    </div>
                    <div class="feature">
                        <div class="icon">ü§ñ</div>
                        <h3>Advanced Bot</h3>
                        <p>Instant payments, 24/7 support & custom profile</p>
                    </div>
                </div>

                <h3 style="font-size: 2em; margin: 40px 0 20px; text-align: center;">
                    üî• What you get:
                </h3>
                <ul>
                    <li>Unlimited lifetime access to all content</li>
                    <li>Updates and new content at no extra cost</li>
                    <li>Private Telegram community with verified members</li>
                    <li>Exclusive content you won't find anywhere else</li>
                    <li>Geolocation feature for real meetups</li>
                    <li>Priority 24/7 support</li>
                </ul>
            </div>

            <div class="payment-section">
                <h2>üí≥ Get Your Lifetime Access Now</h2>
                <div style="text-align: center; margin: 30px 0;">
                    <button id="payNowBtnEn" class="pay-now-button" onclick="payNow()">
                        üí∞ PAY NOW - $80 USD
                    </button>
                    <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                        ‚ÑπÔ∏è If the link is expired, please try again
                    </p>
                </div>
            </div>

            <div class="activation-section">
                <h3>üîë Post-Payment Activation</h3>
                <p>After completing your payment, you will receive a <strong>unique code</strong> via email.</p>
                <p>Send this code to our Telegram bot to activate your lifetime membership.</p>
                <div style="text-align: center;">
                    <a href="https://t.me/pnptv_bot" class="telegram-link" target="_blank">
                        üì± Open Telegram Bot
                    </a>
                </div>
                <p style="margin-top: 20px; font-size: 1em;">
                    Once in the bot, use the command: <code style="background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 5px;">/activate YOUR_CODE</code>
                </p>
            </div>
        </div>
    </div>

    <script src="/firebase-config.js"></script>
    <script>
        let paymentUrls = [];
        let db;
        let currentLang = 'es';

        // Meru payment links - randomizer will select one
        const meruPaymentLinks = [
            'https://pay.getmeru.com/CtJb_x',
            'https://pay.getmeru.com/XvaSxc',
            'https://pay.getmeru.com/tuQXK0',
            'https://pay.getmeru.com/_S6Zcg',
            'https://pay.getmeru.com/u9PTJd',
            'https://pay.getmeru.com/HnQM_-',
            'https://pay.getmeru.com/7brFcr',
            'https://pay.getmeru.com/KVWbaA',
            'https://pay.getmeru.com/v0Q_Un',
            'https://pay.getmeru.com/n1LTnG'
        ];

        // Pay Now function - redirects to random Meru link
        function payNow() {
            const randomIndex = Math.floor(Math.random() * meruPaymentLinks.length);
            const selectedLink = meruPaymentLinks[randomIndex];
            window.open(selectedLink, '_blank');
        }

        // Initialize Firebase
        function initFirebase() {
            try {
                if (typeof firebaseConfig === 'undefined') {
                    console.error('Firebase config not loaded');
                    showError();
                    return;
                }

                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                loadPaymentLinks();
            } catch (error) {
                console.error('Firebase initialization error:', error);
                showError();
            }
        }

        // Load payment links from Firestore
        async function loadPaymentLinks() {
            try {
                const querySnapshot = await db.collection("paymentLinks")
                    .where("used", "==", false)
                    .where("product", "==", "lifetime-pass")
                    .limit(10)
                    .get();

                paymentUrls = querySnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));

                hideLoading();
                renderPaymentLinks(currentLang);
            } catch (error) {
                console.error('Error loading payment links:', error);
                hideLoading();
                showNoLinks();
            }
        }

        // Render payment links
        function renderPaymentLinks(lang) {
            const containerId = lang === 'es' ? 'paymentLinks' : 'paymentLinksEn';
            const container = document.getElementById(containerId);

            if (!container) return;

            container.innerHTML = '';

            if (paymentUrls.length === 0) {
                showNoLinks(lang);
                return;
            }

            paymentUrls.forEach((urlData, index) => {
                const linkElement = document.createElement('a');
                linkElement.href = urlData.url;
                linkElement.className = 'payment-link';
                linkElement.target = '_blank';
                linkElement.rel = 'noopener noreferrer';

                const linkText = lang === 'es'
                    ? `üí≥ Pagar Ahora ${index + 1}`
                    : `üí≥ Pay Now ${index + 1}`;

                linkElement.textContent = linkText;

                linkElement.onclick = async function(e) {
                    if (this.classList.contains('used')) {
                        e.preventDefault();
                        const msg = lang === 'es'
                            ? 'Este enlace ya ha sido utilizado.'
                            : 'This link has already been used.';
                        alert(msg);
                        return false;
                    }

                    // Mark as used in Firestore
                    try {
                        await db.collection("paymentLinks").doc(urlData.id).update({
                            used: true,
                            usedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        this.classList.add('used');

                        // Remove from available links
                        paymentUrls = paymentUrls.filter(url => url.id !== urlData.id);

                        // Reload if no links left
                        if (paymentUrls.length === 0) {
                            setTimeout(() => {
                                showNoLinks(lang);
                            }, 1000);
                        }
                    } catch (error) {
                        console.error('Error marking link as used:', error);
                    }
                };

                container.appendChild(linkElement);
            });
        }

        // Show language
        function showLanguage(lang) {
            currentLang = lang;

            // Update language sections
            document.querySelectorAll('.language').forEach(el => el.classList.remove('active'));
            document.getElementById(lang).classList.add('active');

            // Update buttons
            document.querySelectorAll('.language-selector button').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + lang).classList.add('active');

            // Render payment links for selected language
            renderPaymentLinks(lang);
        }

        // Hide loading
        function hideLoading() {
            document.getElementById('loading-es').style.display = 'none';
            document.getElementById('loading-en').style.display = 'none';
        }

        // Show no links message
        function showNoLinks(lang) {
            const langToUse = lang || currentLang;
            hideLoading();
            document.getElementById('no-links-' + langToUse).style.display = 'block';
        }

        // Show error
        function showError() {
            hideLoading();
            const containers = ['paymentLinks', 'paymentLinksEn'];
            containers.forEach(id => {
                const container = document.getElementById(id);
                if (container) {
                    container.innerHTML = '<div class="no-links-message">Error loading payment options. Please refresh the page.</div>';
                }
            });
        }

        // Initialize on page load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initFirebase);
        } else {
            initFirebase();
        }
    </script>
</body>
</html>
