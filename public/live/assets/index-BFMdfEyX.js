import{r as _e,a as me,g as Ue,b as o,X as pe,M as Me,U as Te,L as Oe,c as ze,d as I,P as _,e as xe,V as ge,R as A,S as Ie,f as X,h as Ae,i as ve,j as ye,k as $e,l as Fe,C as Ve,m as Be,E as We,H as Je,n as qe,o as De}from"./vendor-C09mxWKQ.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var D={exports:{}},U={};var se;function Ke(){if(se)return U;se=1;var e=_e(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,f){var c,m={},p=null,j=null;f!==void 0&&(p=""+f),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(j=u.ref);for(c in u)n.call(u,c)&&!i.hasOwnProperty(c)&&(m[c]=u[c]);if(d&&d.defaultProps)for(c in u=d.defaultProps,u)m[c]===void 0&&(m[c]=u[c]);return{$$typeof:r,type:d,key:p,ref:j,props:m,_owner:a.current}}return U.Fragment=s,U.jsx=l,U.jsxs=l,U}var re;function Xe(){return re||(re=1,D.exports=Ke()),D.exports}var t=Xe(),z={},ne;function Ge(){if(ne)return z;ne=1;var e=me();return z.createRoot=e.createRoot,z.hydrateRoot=e.hydrateRoot,z}var Ye=Ge();const Qe=Ue(Ye);(function(){const r=window.Telegram?.WebApp,s=document.documentElement;if(r){const n=r.themeParams||{},a=(i,l)=>{l&&s.style.setProperty(i,l)};a("--tg-bg",n.bg_color),a("--tg-text",n.text_color),a("--tg-hint",n.hint_color),a("--tg-link",n.link_color),a("--tg-button",n.button_color),a("--tg-button-text",n.button_text_color),a("--tg-secondary-bg",n.secondary_bg_color),r.expand(),r.ready()}else s.style.setProperty("--tg-bg","#1c1c1e"),s.style.setProperty("--tg-text","#f5f5f7"),s.style.setProperty("--tg-hint","#8e8e93"),s.style.setProperty("--tg-link","#0a84ff"),s.style.setProperty("--tg-button","#0a84ff"),s.style.setProperty("--tg-button-text","#ffffff"),s.style.setProperty("--tg-secondary-bg","#2c2c2e")})();me();function G(){return G=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},G.apply(this,arguments)}var ae;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ae||(ae={}));function C(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Ze(e,r){{typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function ie(e){let{pathname:r="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function je(e){let r={};if(e){let s=e.indexOf("#");s>=0&&(r.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(r.search=e.substr(n),e=e.substr(0,n)),e&&(r.pathname=e)}return r}var oe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(oe||(oe={}));function He(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}const et=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tt=e=>et.test(e);function st(e,r){r===void 0&&(r="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?je(e):e,i;if(s)if(tt(s))i=s;else{if(s.includes("//")){let l=s;s=s.replace(/\/\/+/g,"/"),Ze(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+s))}s.startsWith("/")?i=le(s.substring(1),"/"):i=le(s,r)}else i=r;return{pathname:i,search:nt(n),hash:at(a)}}function le(e,r){let s=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function K(e,r,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rt(e){return e.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function be(e,r){let s=rt(e);return r?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function we(e,r,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=je(e):(a=G({},e),C(!a.pathname||!a.pathname.includes("?"),K("?","pathname","search",a)),C(!a.pathname||!a.pathname.includes("#"),K("#","pathname","hash",a)),C(!a.search||!a.search.includes("#"),K("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,d;if(l==null)d=s;else{let m=r.length-1;if(!n&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),m-=1;a.pathname=p.join("/")}d=m>=0?r[m]:"/"}let u=st(a,d),f=l&&l!=="/"&&l.endsWith("/"),c=(i||l===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(f||c)&&(u.pathname+="/"),u}const Ne=e=>e.join("/").replace(/\/\/+/g,"/"),nt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,at=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ce=["post","put","patch","delete"];new Set(Ce);const it=["get",...Ce];new Set(it);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Y.apply(this,arguments)}const Pe=o.createContext(null),M=o.createContext(null),Se=o.createContext(null),$=o.createContext({outlet:null,matches:[],isDataRoute:!1});function ot(e,r){let{relative:s}=r===void 0?{}:r;Z()||C(!1);let{basename:n,navigator:a}=o.useContext(M),{hash:i,pathname:l,search:d}=ke(e,{relative:s}),u=l;return n!=="/"&&(u=l==="/"?n:Ne([n,l])),a.createHref({pathname:u,search:d,hash:i})}function Z(){return o.useContext(Se)!=null}function H(){return Z()||C(!1),o.useContext(Se).location}function Re(e){o.useContext(M).static||o.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=o.useContext($);return e?ht():ct()}function ct(){Z()||C(!1);let e=o.useContext(Pe),{basename:r,future:s,navigator:n}=o.useContext(M),{matches:a}=o.useContext($),{pathname:i}=H(),l=JSON.stringify(be(a,s.v7_relativeSplatPath)),d=o.useRef(!1);return Re(()=>{d.current=!0}),o.useCallback(function(f,c){if(c===void 0&&(c={}),!d.current)return;if(typeof f=="number"){n.go(f);return}let m=we(f,JSON.parse(l),i,c.relative==="path");e==null&&r!=="/"&&(m.pathname=m.pathname==="/"?r:Ne([r,m.pathname])),(c.replace?n.replace:n.push)(m,c.state,c)},[r,n,l,i,e])}function ke(e,r){let{relative:s}=r===void 0?{}:r,{future:n}=o.useContext(M),{matches:a}=o.useContext($),{pathname:i}=H(),l=JSON.stringify(be(a,n.v7_relativeSplatPath));return o.useMemo(()=>we(e,JSON.parse(l),i,s==="path"),[e,l,i,s])}var Ee=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(Ee||{}),Le=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(Le||{});function ut(e){let r=o.useContext(Pe);return r||C(!1),r}function dt(e){let r=o.useContext($);return r||C(!1),r}function ft(e){let r=dt(),s=r.matches[r.matches.length-1];return s.route.id||C(!1),s.route.id}function ht(){let{router:e}=ut(Ee.UseNavigateStable),r=ft(Le.UseNavigateStable),s=o.useRef(!1);return Re(()=>{s.current=!0}),o.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Y({fromRouteId:r},i)))},[e,r])}new Promise(()=>{});function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Q.apply(this,arguments)}function mt(e,r){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(r.indexOf(a)>=0)&&(s[a]=e[a]);return s}function pt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xt(e,r){return e.button===0&&(!r||r==="_self")&&!pt(e)}const gt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vt="6";try{window.__reactRouterVersion=vt}catch{}const yt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ce=o.forwardRef(function(r,s){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:d,target:u,to:f,preventScrollReset:c,viewTransition:m}=r,p=mt(r,gt),{basename:j}=o.useContext(M),R,P=!1;if(typeof f=="string"&&jt.test(f)&&(R=f,yt))try{let v=new URL(window.location.href),b=f.startsWith("//")?new URL(v.protocol+f):new URL(f),w=He(b.pathname,j);b.origin===v.origin&&w!=null?f=w+b.search+b.hash:P=!0}catch{}let T=ot(f,{relative:a}),S=bt(f,{replace:l,state:d,target:u,preventScrollReset:c,relative:a,viewTransition:m});function h(v){n&&n(v),v.defaultPrevented||S(v)}return o.createElement("a",Q({},p,{href:R||T,onClick:P||i?n:h,ref:s,target:u}))});var ue;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ue||(ue={}));var de;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(de||(de={}));function bt(e,r){let{target:s,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:d}=r===void 0?{}:r,u=lt(),f=H(),c=ke(e,{relative:l});return o.useCallback(m=>{if(xt(m,s)){m.preventDefault();let p=n!==void 0?n:ie(f)===ie(c);u(e,{replace:p,state:a,preventScrollReset:i,relative:l,viewTransition:d})}},[f,u,c,n,a,s,e,i,l,d])}function wt(){const[e,r]=o.useState(!1),s=()=>{r(!e)};return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:s,className:"hamburger-menu-button",children:e?t.jsx(pe,{size:24}):t.jsx(Me,{size:24})}),t.jsx("div",{className:`off-canvas-menu-overlay ${e?"open":""}`,onClick:s}),t.jsxs("div",{className:`off-canvas-menu ${e?"open":""}`,children:[t.jsxs(ce,{to:"/app/profile",className:"menu-item",onClick:s,children:[t.jsx(Te,{size:20})," My Profile"]}),t.jsxs("a",{href:"https://t.me/PNPLatinoTV_Bot",target:"_blank",rel:"noopener noreferrer",className:"menu-item",onClick:s,children:[t.jsx(Oe,{size:20})," Support"]}),t.jsxs(ce,{to:"/app/messages",className:"menu-item",onClick:s,children:[t.jsx(ze,{size:20})," Direct Messages"]})]})]})}function Nt({title:e,telegramUser:r,onLogout:s}){return t.jsxs("header",{className:"header",children:[t.jsx("div",{className:"header-logo",style:{backgroundColor:"#120d14",padding:"5px"},children:t.jsx("img",{src:"/logo3.png",alt:"Logo",className:"h-8 w-auto"})}),t.jsx(wt,{})]})}function Ct(e){if(!e)return"";const r=Math.floor(e/60),s=e%60;if(r>=60){const n=Math.floor(r/60),a=r%60;return`${n}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}return`${r}:${s.toString().padStart(2,"0")}`}function Pt(e){switch(e){case"video":return ge;case"audio":return I;case"podcast":return xe;default:return I}}function St({media:e,onSelect:r}){return!e||e.length===0?t.jsxs("div",{className:"text-center py-16",children:[t.jsx(I,{size:48,className:"mx-auto text-muted-color"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No media found"}),t.jsx("p",{className:"mt-2 text-sm text-muted-color",children:"Check back later for new content!"})]}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(s=>{const n=Pt(s.type);return t.jsxs("div",{className:"bg-color-2 rounded-lg overflow-hidden shadow-md cursor-pointer transition-transform duration-200 hover:scale-105",onClick:()=>r(s),children:[t.jsxs("div",{className:"relative",children:[s.cover_url?t.jsx("img",{src:s.cover_url,alt:s.title,loading:"lazy",className:"w-full h-48 object-cover"}):t.jsx("div",{className:"w-full h-48 flex items-center justify-center bg-color",children:t.jsx(n,{size:32,className:"text-muted-color"})}),t.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:t.jsx("button",{className:"bg-primary-color text-white rounded-full p-3",children:t.jsx(_,{size:24,fill:"white"})})}),s.duration&&t.jsx("span",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:Ct(s.duration)})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"font-semibold truncate",children:s.title}),t.jsx("p",{className:"text-sm text-muted-color truncate",children:s.artist||"Unknown Artist"})]})]},s.id)})})}function Rt({media:e,onClose:r,radioNowPlaying:s,onRadioToggle:n}){const[a,i]=o.useState(!1),[l,d]=o.useState(0),[u,f]=o.useState(0),[c,m]=o.useState(1),[p,j]=o.useState(!1),[R,P]=o.useState(!1),[T,S]=o.useState(!0),h=o.useRef(null),v=o.useRef(null),b=o.useRef(null),w=e.type==="video",O=e.type==="audio"||e.type==="podcast";o.useEffect(()=>{h.current&&e.url&&h.current.load()},[e]),o.useEffect(()=>{const y=()=>{S(!0),clearTimeout(b.current),b.current=setTimeout(()=>{a&&S(!1)},3e3)};return document.addEventListener("mousemove",y),()=>{document.removeEventListener("mousemove",y),clearTimeout(b.current)}},[a]);function N(){h.current&&(a?h.current.pause():h.current.play(),i(!a))}function k(){h.current&&d(h.current.currentTime)}function L(){h.current&&f(h.current.duration)}function V(y){const g=y.currentTarget.getBoundingClientRect(),te=(y.clientX-g.left)/g.width*u;h.current&&(h.current.currentTime=te,d(te))}function B(){h.current&&(h.current.muted=!p,j(!p))}function W(y){const g=parseFloat(y.target.value);m(g),h.current&&(h.current.volume=g,j(g===0))}function J(){document.fullscreenElement?(document.exitFullscreen(),P(!1)):(v.current?.requestFullscreen(),P(!0))}function q(y){h.current&&(h.current.currentTime=Math.max(0,Math.min(u,l+y)))}function x(y){const g=Math.floor(y/60),ee=Math.floor(y%60);return`${g}:${ee.toString().padStart(2,"0")}`}const E=u>0?l/u*100:0;return t.jsxs("div",{className:`fixed inset-0 bg-black flex flex-col z-50 ${R?"fullscreen":""}`,ref:v,children:[t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx("button",{className:"bg-black/50 text-white rounded-full p-2",onClick:r,children:t.jsx(pe,{size:24})})}),t.jsxs("div",{className:"flex-grow flex items-center justify-center",children:[w&&e.url?t.jsx("video",{ref:h,className:"w-full h-full object-contain",onTimeUpdate:k,onLoadedMetadata:L,onEnded:()=>i(!1),onClick:N,children:t.jsx("source",{src:e.url,type:"video/mp4"})}):t.jsxs("div",{className:"relative w-full max-w-md",children:[e.cover_url?t.jsx("img",{src:e.cover_url,alt:e.title,className:"w-full rounded-lg shadow-lg"}):t.jsx("div",{className:"w-full aspect-square bg-color-2 flex items-center justify-center rounded-lg",children:t.jsx(_,{size:64,className:"text-muted-color"})}),O&&e.url&&t.jsx("audio",{ref:h,onTimeUpdate:k,onLoadedMetadata:L,onEnded:()=>i(!1),children:t.jsx("source",{src:e.url,type:"audio/mpeg"})})]}),!a&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",onClick:N,children:t.jsx("button",{className:"bg-black/50 text-white rounded-full p-4",children:t.jsx(_,{size:48,fill:"white"})})})]}),t.jsx("div",{className:`absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent transition-opacity duration-300 ${T?"opacity-100":"opacity-0"}`,children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h2",{className:"text-white text-xl font-bold",children:e.title}),t.jsx("p",{className:"text-gray-300",children:e.artist||"Unknown Artist"})]}),t.jsx("div",{className:"w-full h-2 bg-white/20 rounded-full cursor-pointer",onClick:V,children:t.jsx("div",{className:"h-full bg-primary-color rounded-full",style:{width:`${E}%`}})}),t.jsxs("div",{className:"flex justify-between text-white text-xs mt-2",children:[t.jsx("span",{children:x(l)}),t.jsx("span",{children:x(u)})]}),t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsx("div",{className:"flex items-center gap-4",children:s&&t.jsx("button",{className:"text-white",onClick:n,children:t.jsx(A,{size:20})})}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{className:"text-white",onClick:()=>q(-10),title:"Rewind 10s",children:t.jsx(Ie,{size:24})}),t.jsx("button",{className:"bg-white text-black rounded-full p-3",onClick:N,children:a?t.jsx(X,{size:28,fill:"black"}):t.jsx(_,{size:28,fill:"black"})}),t.jsx("button",{className:"text-white",onClick:()=>q(10),title:"Forward 10s",children:t.jsx(Ae,{size:24})})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:B,className:"text-white",children:p||c===0?t.jsx(ve,{size:20}):t.jsx(ye,{size:20})}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:p?0:c,onChange:W,className:"w-24"})]}),w&&t.jsx("button",{className:"text-white",onClick:J,children:R?t.jsx($e,{size:20}):t.jsx(Fe,{size:20})})]})]})]})})]})}function fe({nowPlaying:e,isExpanded:r,onToggle:s}){const[n,a]=o.useState(!1),[i,l]=o.useState(!1);if(!e)return null;const d=e.track||{},u=e.listenerCount||0;function f(){const c=window.location.origin+"/radio/";window.open(c,"_blank")}return t.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-40 transition-all duration-300 ${r?"h-64":"h-16"}`,children:t.jsxs("div",{className:"bg-color-2 shadow-lg h-full",children:[t.jsxs("div",{className:`flex items-center justify-between px-4 h-16 cursor-pointer ${r?"border-b border-color":""}`,onClick:s,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"text-primary-color animate-pulse",children:t.jsx(A,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-sm",children:d.title||"PNPtv Radio"}),t.jsx("p",{className:"text-xs text-muted-color",children:d.artist||"Live 24/7"})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{className:"p-2",onClick:c=>{c.stopPropagation(),a(!n)},children:n?t.jsx(X,{size:20}):t.jsx(_,{size:20,fill:"currentColor"})}),t.jsx("button",{className:"p-2",children:r?t.jsx(Ve,{size:20}):t.jsx(Be,{size:20})})]})]}),t.jsxs("div",{className:`px-4 pt-4 transition-opacity duration-200 ${r?"opacity-100":"opacity-0"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[d.thumbnailUrl?t.jsx("img",{src:d.thumbnailUrl,alt:d.title,className:"w-24 h-24 rounded-md"}):t.jsx("div",{className:"w-24 h-24 bg-color flex items-center justify-center rounded-md",children:t.jsx(A,{size:32,className:"text-muted-color"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-color",children:"Now Playing"}),t.jsx("p",{className:"font-bold text-lg",children:d.title||"Unknown Track"}),t.jsx("p",{className:"text-sm text-muted-color",children:d.artist||"Unknown Artist"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-muted-color",children:[u," Listeners"]}),t.jsx("span",{className:"text-xs font-bold text-red-500 animate-pulse",children:"LIVE"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>l(!i),children:i?t.jsx(ve,{size:20}):t.jsx(ye,{size:20})}),t.jsx("button",{className:"bg-primary-color text-white rounded-full p-3",onClick:()=>a(!n),children:n?t.jsx(X,{size:24,fill:"white"}):t.jsx(_,{size:24,fill:"white"})}),t.jsx("button",{onClick:f,children:t.jsx(We,{size:20})})]})]})]})]})})}const kt=[{id:"all",label:"All",icon:Je},{id:"featured",label:"Featured",icon:qe},{id:"videos",label:"Videos",icon:ge},{id:"music",label:"Music",icon:I},{id:"podcast",label:"Podcasts",icon:xe},{id:"radio",label:"Radio",icon:A}];function Et({selected:e,onChange:r,radioActive:s}){return t.jsx("nav",{className:"mb-8",children:t.jsx("div",{className:"flex space-x-2 p-1 bg-color-2 rounded-lg",children:kt.map(n=>{const a=n.icon,i=n.id==="radio";return t.jsxs("button",{className:`flex-1 text-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${e===n.id?"bg-primary-color text-white":"text-muted-color hover:bg-color"}`,onClick:()=>r(n.id),children:[t.jsx(a,{size:18,className:"inline-block mr-2"}),t.jsx("span",{children:n.label}),i&&s&&t.jsx("span",{className:"inline-block w-2 h-2 ml-2 bg-red-500 rounded-full"})]},n.id)})})})}const F=window.location.hostname==="localhost"?"http://localhost:3000/api":"/api";async function Lt(e="all",r=null){try{let s=`${F}/media/library?type=${e}`;r&&(s+=`&category=${r}`);const n=await fetch(s);if(!n.ok)throw new Error("Failed to fetch media");return await n.json()}catch(s){return console.error("Error fetching media library:",s),[]}}async function _t(){try{const e=await fetch(`${F}/radio/now-playing`);if(!e.ok)throw new Error("Failed to fetch now playing");return await e.json()}catch(e){return console.error("Error fetching radio now playing:",e),null}}function Ut(){const e=new URLSearchParams(window.location.search);return{token:e.get("token"),uid:e.get("uid"),view:e.get("view")||"home",mediaId:e.get("id"),role:e.get("role")||"",isPrime:e.get("prime")==="true"||e.get("isPrime")==="true"}}async function Mt(){try{const e=await fetch(`${F}/telegram-auth/check`);return e.ok&&(await e.json()).user||null}catch(e){return console.error("Error fetching Telegram user:",e),null}}async function Tt(e,r,s,n){s(!0);try{const i=await(await fetch(`${F}/telegram-auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();i.success?r(i.user):n(i.message||"Telegram login failed.")}catch(a){console.error("Error during Telegram auth:",a),n("Network error during Telegram login.")}finally{s(!1)}}const he=[{id:"1",title:"Welcome to PNPtv",artist:"PNPtv Team",type:"video",category:"featured",duration:180,cover_url:"https://picsum.photos/seed/pnp1/400/225",url:"https://www.w3schools.com/html/mov_bbb.mp4"},{id:"2",title:"Community Highlights",artist:"PNPtv Community",type:"video",category:"featured",duration:240,cover_url:"https://picsum.photos/seed/pnp2/400/225",url:"https://www.w3schools.com/html/movie.mp4"},{id:"3",title:"Latin Vibes Mix",artist:"DJ PNP",type:"audio",category:"music",duration:3600,cover_url:"https://picsum.photos/seed/pnp3/400/400",url:""},{id:"4",title:"PNPtv Podcast Ep. 1",artist:"The PNP Crew",type:"audio",category:"podcast",duration:2400,cover_url:"https://picsum.photos/seed/pnp4/400/400",url:""},{id:"5",title:"Best of the Week",artist:"Various Artists",type:"video",category:"videos",duration:600,cover_url:"https://picsum.photos/seed/pnp5/400/225",url:"https://www.w3schools.com/html/mov_bbb.mp4"},{id:"6",title:"Dance Party Mix",artist:"DJ Latino",type:"audio",category:"music",duration:4200,cover_url:"https://picsum.photos/seed/pnp6/400/400",url:""}];function Ot(){const[e,r]=o.useState(null),[s,n]=o.useState("home"),[a,i]=o.useState("all"),[l,d]=o.useState([]),[u,f]=o.useState(null),[c,m]=o.useState(null),[p,j]=o.useState(!1),[R,P]=o.useState(!0),[T,S]=o.useState(null),[h,v]=o.useState(null),[b,w]=o.useState(!0),[O,N]=o.useState(!1);o.useRef(null),o.useEffect(()=>{const x=Ut();r(x),n(x.view||"home"),(async()=>{w(!0);try{const g=await Mt();g?(v(g),N(!0),k(),L()):N(!1)}catch(g){S(g.message),N(!1)}finally{w(!1)}})(),window.onTelegramAuth=async g=>{await Tt(g,v,w,S),N(!0),k(),L()};const y=setInterval(L,3e4);return()=>{clearInterval(y)}},[O]);async function k(x=null){P(!0);try{const E=await Lt("all",x);d(E.length>0?E:he)}catch(E){console.error("Failed to load media, using demo data:",E),d(he)}P(!1)}async function L(){try{const x=await _t();m(x)}catch(x){console.error("Failed to load radio status:",x)}}function V(x){i(x),x==="all"?k():x==="radio"?j(!0):k(x)}function B(x){f(x),n("player")}const W=async()=>{try{await fetch("/api/logout",{method:"POST"}),v(null),N(!1)}catch(x){console.error("Logout failed:",x),S("Failed to log out.")}};function J(){f(null),n("home")}return b?t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-color",children:[t.jsx("div",{className:"spinner-lg"}),t.jsx("p",{className:"text-muted-color mt-4",children:"Loading authentication..."})]}):O?s==="player"&&u?t.jsxs(t.Fragment,{children:[t.jsx(Rt,{media:u,onClose:J,radioNowPlaying:c,onRadioToggle:()=>j(!p)}),c&&t.jsx(fe,{nowPlaying:c,isExpanded:p,onToggle:()=>j(!p)})]}):t.jsxs("div",{className:"bg-color text-color min-h-screen",children:[t.jsx(Nt,{title:"PNPtv Live",telegramUser:h,onLogout:W}),t.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx(Et,{selected:a,onChange:V,radioActive:c!==null}),R?t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx("div",{className:"spinner-lg"}),t.jsx("p",{className:"text-muted-color mt-4",children:"Loading media..."})]}):t.jsx(St,{media:l,onSelect:B}),c&&t.jsx(fe,{nowPlaying:c,isExpanded:p,onToggle:()=>j(!p)})]})]}):(window.location.href="/prime-hub/",t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-color",children:[t.jsx("div",{className:"spinner-lg"}),t.jsx("p",{className:"text-muted-color mt-4",children:"Redirecting to login..."})]}))}Qe.createRoot(document.getElementById("root")).render(t.jsx(De.StrictMode,{children:t.jsx(Ot,{})}));
