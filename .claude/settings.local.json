{
  "permissions": {
    "allow": [
      "Bash(echo:*)",
      "Bash(cat:*)",
      "Bash(npm run)",
      "Bash(git -C /root/pnptvbot-production submodule status)",
      "Bash(rm:*)",
      "Bash(pm2 list:*)",
      "Bash(npm install)",
      "Bash(npm install:*)",
      "Bash(pm2 logs:*)",
      "Bash(node:*)",
      "Bash(pm2 restart:*)",
      "Bash(pm2 delete:*)",
      "Bash(pm2 start:*)",
      "Bash(netstat:*)",
      "Bash(PGPASSWORD='Apelo801050#' psql:*)",
      "Bash(PGPASSWORD='Apelo801050#' psql -h localhost -p 55432 -U pnptvbot -d pnptvbot -c \"SHOW password_encryption;\")",
      "Bash(pm2 status:*)",
      "Bash(pm2 save:*)",
      "Bash(curl:*)",
      "Bash(openssl s_client:*)",
      "Bash(openssl x509:*)",
      "Bash(certbot --version:*)",
      "Bash(ln:*)",
      "Bash(nginx -t:*)",
      "Bash(systemctl reload:*)",
      "Bash(nslookup:*)",
      "Bash(dig:*)",
      "Bash(certbot certificates:*)",
      "Bash(certbot certonly:*)",
      "Bash(whois:*)",
      "Bash(chmod:*)",
      "Bash(/tmp/check-dns-and-get-ssl.sh:*)",
      "Bash(git push:*)",
      "Bash(git pull:*)",
      "Bash(git fetch:*)",
      "Bash(git merge:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(npm test:*)",
      "Bash(env)",
      "Bash(ls:*)",
      "Bash(ping:*)",
      "Bash(git config:*)",
      "Bash(git remote set-url:*)",
      "Bash(git branch:*)",
      "Bash(grep:*)",
      "Bash(pm2 show:*)",
      "Bash(python3:*)",
      "Bash(wc:*)",
      "Bash(npm start)",
      "Bash(pm2 kill:*)",
      "Bash(lsof:*)",
      "Bash(timeout 10 curl:*)",
      "Bash(for file in /root/pnptvbot-production/src/bot/api/routes.js /root/pnptvbot-production/src/bot/api/controllers/paymentController.js)",
      "Bash(do echo \"Checking $file...\")",
      "Bash(done)",
      "Bash(for file in /root/pnptvbot-production/src/bot/services/confirmationTokenService.js /root/pnptvbot-production/src/bot/services/paymentNotificationService.js /root/pnptvbot-production/src/bot/services/paymentService.js)",
      "Bash(timeout 5 curl:*)",
      "Bash(pm2 --version:*)",
      "Bash(timeout 15 node:*)",
      "Bash(git checkout:*)",
      "Bash(timeout 10 node:*)",
      "Bash(find:*)",
      "Bash(tree:*)",
      "Bash(for path in \"/\" \"/index.html\" \"/pnptvvideorooms\" \"/pnptvvideorooms/\" \"/app\" \"/app/\")",
      "Bash(do)",
      "Bash(pm2 info:*)",
      "Bash(nginx -T:*)",
      "Bash(readlink:*)",
      "Bash(sudo cp:*)",
      "Bash(sudo rm:*)",
      "Bash(sudo ln:*)",
      "Bash(sudo nginx:*)",
      "Bash(sudo systemctl reload:*)",
      "Bash(sudo systemctl status:*)",
      "Bash(sudo tail:*)",
      "Bash(pm2 stop:*)",
      "Bash(export NODE_ENV=production)",
      "Bash(export NODE_OPTIONS=\"--max-old-space-size=4096\")",
      "Bash(xargs ls:*)",
      "Bash(PGPASSWORD='Apelo bryant-pass-data.md' psql:*)",
      "Bash(scp:*)",
      "Bash(ssh-keyscan:*)",
      "Bash(~/.ssh/known_hosts)",
      "Bash(timeout 120 node:*)",
      "Bash(timeout 60 node:*)",
      "Bash(npm run build:*)",
      "Bash(apt-get update:*)",
      "Bash(apt-get install:*)",
      "Bash(expect:*)",
      "Bash(apt --fix-broken install:*)",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"sudo ufw allow 80/tcp && sudo ufw allow 443/tcp && echo ''Ports opened''\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"dig videorooms.pnptv.app +short && nslookup videorooms.pnptv.app 8.8.8.8 | grep -i ''address\\\\|name''\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"tail -50 /var/log/letsencrypt/letsencrypt.log | grep -A5 -B5 ''No such authorization\\\\|malformed''\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"rm -rf /etc/letsencrypt/accounts/* && certbot certonly --standalone -d videorooms.pnptv.app --email admin@pnptv.app --agree-tos --no-eff-email --non-interactive --preferred-challenges http 2>&1 | head -40\")",
      "Bash(sudo certbot certonly:*)",
      "Bash(sshpass -p 'Apelo801050\\)' scp -r -o StrictHostKeyChecking=no /etc/letsencrypt/live/videorooms.pnptv.app root@148.230.80.210:/etc/letsencrypt/live/)",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"mkdir -p /etc/letsencrypt/live && mkdir -p /etc/letsencrypt/archive && echo ''Directories created''\")",
      "Bash(sshpass -p 'Apelo801050\\)' scp -r -o StrictHostKeyChecking=no /etc/letsencrypt/live/videorooms.pnptv.app/ root@148.230.80.210:/etc/letsencrypt/live/videorooms.pnptv.app)",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"ls -la /etc/letsencrypt/live/videorooms.pnptv.app/\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"netstat -tuln 2>/dev/null | grep 8080 || ss -tuln 2>/dev/null | grep 8080\")",
      "Bash(ss:*)",
      "Bash(source .env)",
      "Bash(pkill:*)",
      "Bash(npm cache clean:*)",
      "Bash(pm2 startup:*)",
      "Bash(for url in \"https://pnptv.app/lifetime100\" \"https://pnptv.app/radio.html\" \"https://pnptv.app/community-room\" \"https://pnptv.app/age-verification-camera.html\")",
      "Bash(if curl -s \"$url\")",
      "Bash(then)",
      "Bash(else)",
      "Bash(fi)",
      "Bash(source /root/pnptvbot-production/.env)",
      "Bash(for file in /root/pnptvbot-production/public/{radio,age-verification-camera,checkout,community-room,design-reference,index,lifetime-pass,youtube-playlist}.html)",
      "Bash(if grep -q \"font-family.*--font-title\" \"$file\")",
      "Bash(xargs kill:*)",
      "Bash(~/.ssh/authorized_keys)",
      "Bash(~/.git-credentials)",
      "Bash(git log:*)",
      "Bash(FILTER_BRANCH_SQUELCH_WARNING=1 git filter-branch:*)",
      "Bash(python3 -m pip install:*)",
      "Bash(xargs:*)",
      "Bash(__NEW_LINE__ grep -n \"REDIS_PASSWORD\\\\|SENDGRID_API_KEY\\\\|SMTP_PASSWORD\" /root/pnptvbot-production/.env)",
      "Bash(node scripts/send-video-room-broadcast.js:*)",
      "Bash(pg_isready:*)",
      "Bash(PGPASSWORD=\"Apelo801050#\" psql:*)",
      "Bash(node scripts/send-broadcast-auto.js:*)",
      "Bash(zcat:*)",
      "Bash(node -c:*)",
      "Bash(curl -s https://pnptv.app/community-room)",
      "Bash(sudo systemctl restart:*)",
      "Bash(npm run apply-hangouts-schema:*)",
      "Bash(node scripts/apply-hangouts-schema.js:*)",
      "Bash(kill:*)",
      "Bash(tail:*)",
      "Bash(cp:*)",
      "Bash(docker logs:*)",
      "Bash(docker build:*)",
      "Bash(docker stop:*)",
      "Bash(docker run:*)",
      "Bash(docker rm:*)",
      "Bash(curl -s https://pnptv.app/community-features.html)",
      "Bash(npm run lint:*)",
      "Bash(npm run test:unit:*)",
      "Bash(docker-compose down:*)",
      "Bash(docker-compose up:*)",
      "Bash(docker-compose ps:*)",
      "Bash(docker-compose logs:*)",
      "Bash(git hash-object:*)",
      "Bash(git update-index:*)",
      "Bash(touch:*)",
      "Bash(npm ci)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nrefactor: Redesign community features page with PNPtv! branding and content\n\nComplete rewrite of the community features page with:\n- Streamlined, direct content focused on PNPtv! community\n- Clear explanation of what PNPtv! is \\(PNP stans community on Telegram\\)\n- Simple How It Works section \\(Telegram, Channel, Group, Bot\\)\n- Step-by-step joining instructions\n- Comprehensive payment methods \\(ePayco, Daimo/Crypto, PayPal, Bank apps\\)\n- Premium features overview\n- Instant activation after payment\n- Mobile-responsive sidebar navigation with smooth scrolling\n- Clean, modern design with fade-in animations\n- CTA buttons linking to t.me/pnptv_bot\n- Better information hierarchy and readability\n\nChanges:\nâœ¨ Focused on actual user journey \\(join â†’ pay â†’ access features\\)\nðŸ“± Responsive design with hamburger menu\nðŸŽ¯ Clear navigation sidebar with active indicators\nðŸ’³ Payment methods prominently featured\nðŸŽ¬ Smooth animations and transitions\nðŸ”— Direct links to Telegram bot\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Add Jitsi Moderator Bot for automated meeting room moderation\n\n- Implement JitsiModeratorBot service for room and participant management\n- Add auto-moderation with configurable violation thresholds\n- Mute, kick, lock rooms, and send messages to participants\n- Integrate Telegram /jitsimod command with admin-only access\n- Add real-time participant tracking and violation recording\n- Support multi-room simultaneous moderation\n- Include comprehensive documentation and examples\n- Event-driven architecture for scalable operations\n\nFeatures:\n- Room management \\(join/leave\\)\n- Participant tracking with violation history\n- Auto-mute at 3 violations, auto-kick at 5\n- Room locking and status monitoring\n- Telegram UI with inline buttons\n- Admin-only command access\n- Full event system for integrations\n\nDocumentation:\n- JITSI_MODERATOR_README.md - Main overview\n- JITSI_MODERATOR_BOT.md - Full API documentation\n- JITSI_MODERATOR_INTEGRATION.md - Setup guide\n- JITSI_MODERATOR_QUICK_REF.md - Quick reference\n- JITSI_MODERATOR_CHECKLIST.md - Deployment checklist\n- examples/jitsi-moderator-examples.js - 10 working examples\n\nIntegration:\n- Added registerJitsiModeratorHandlers to src/bot/core/bot.js\n- Service uses existing logger, environment config\n- Compatible with current Jitsi setup \\(meet.jit.si\\)\n- Respects existing admin-only access patterns\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(nginx -s reload:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Unify prime member confirmation messages across all activation sources\n\n- Create centralized MessageTemplates service for consistent messaging\n- Add prominent how-to-use guide link \\(https://pnptv.app/how-to-use\\) to all confirmations\n- Ensure all activation sources generate unique PRIME channel invite links\n- Standardize message format across payment, subscription, and lifetime pass activations\n- Support bilingual messages \\(Spanish & English\\)\n\nAffected files:\nâœ¨ NEW: src/bot/services/messageTemplates.js\n  - buildPrimeActivationMessage\\(\\) - Unified payment confirmation format\n  - buildLifetimePassMessage\\(\\) - Lifetime pass activation message\n  - Helper methods for date formatting and validation\n\nðŸ”„ UPDATED: src/bot/services/paymentService.js\n  - Use MessageTemplates.buildPrimeActivationMessage\\(\\)\n  - Now includes how-to-use guide link\n  - Maintains unique invite link generation\n\nðŸ”„ UPDATED: src/bot/services/paymentNotificationService.js\n  - Use MessageTemplates for subscription activated notifications\n  - Generate unique PRIME channel invite links\n  - Include how-to-use guide in messages\n\nðŸ”„ UPDATED: src/bot/handlers/payments/activation.js\n  - Lifetime pass uses unified message template\n  - Generates unique PRIME channel invite link\n  - Includes how-to-use guide with activation confirmation\n\nBenefits:\nâœ… Consistent user experience across all payment methods\nâœ… Single source of truth for message formatting\nâœ… Easy to update messages globally\nâœ… All users see how-to-use guide prominently\nâœ… Reduced code duplication\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nrefactor: Redesign how-to-use page with professional PNPtv! branding\n\nComplete visual overhaul of the how-to-use.html page with:\n- Professional PNPtv! color scheme \\(purple gradient #667eea-#764ba2, gold accents\\)\n- Improved typography using BBH Bartle font for headings\n- Better spacing, padding, and visual hierarchy\n- Professional card designs with hover effects and animations\n- Proper contrast and readability improvements\n- Language toggle with localStorage persistence \\(English/Spanish\\)\n- Hero section with gradient text and animated background\n- Responsive design with mobile-first approach\n- Backdrop filter effects for glassmorphism design\n- Better button styling with proper feedback animations\n- Fixed navigation bar with smooth scrolling support\n- Proper section spacing and layout\n\nDesign improvements:\nâœ¨ Color scheme matches PNPtv! branding throughout\nðŸ“± Full responsive design \\(mobile, tablet, desktop\\)\nðŸŽ¨ Professional card-based layout with proper spacing\nâœï¸ Better typography hierarchy and readability\nðŸŽ¯ Clear visual focus on CTAs and important content\nâš¡ Smooth animations and transitions\nðŸŒ Bilingual support \\(English/EspaÃ±ol\\) with toggle\n\nThe page is now visually consistent with PNPtv!''s brand identity and significantly more readable.\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nrefactor: Convert how-to-use page to JSON-driven scalable architecture\n\nCompletely refactored the how-to-use.html page from a hardcoded dual-DOM bilingual\nstructure to a modern JSON-driven, component-based architecture that makes adding\nnew content trivial.\n\n## Key Improvements\n\n### Architecture\n- Single DOM tree with dynamic rendering instead of duplicate EN/ES sections\n- JSON data structure as single source of truth for all content\n- Component-based rendering system with three main classes:\n  * ContentRenderer - Renders individual content elements\n  * SectionRenderer - Renders section-level components\n  * BilingualPageManager - Manages page lifecycle and language switching\n\n### Scalability\n- Adding a new section now requires ~20-40 lines of JSON instead of ~160-300 lines of HTML\n- Content defined once, automatically renders in both languages\n- No HTML/CSS duplication\n- Supports 8+ content types: paragraph, list, ordered-list, subsection, infobox, card, cta, html\n\n### Maintainability\n- Single source of truth eliminates EN/ES content mismatch issues\n- Easy to reorder sections \\(just change the ''order'' field\\)\n- Extensible design for adding new content types via plugin system\n- Clear separation of concerns \\(data, rendering, presentation\\)\n\n### Features Preserved\nâœ… Full bilingual support \\(English/Spanish\\)\nâœ… Language toggle with localStorage persistence\nâœ… Professional PNPtv! branding and design\nâœ… Responsive design \\(mobile, tablet, desktop\\)\nâœ… All animations and transitions\nâœ… Card grids, info boxes, CTAs\nâœ… Navigation bar and language selector\nâœ… Footer with copyright and disclaimer\n\n### File Reduction\n- Before: 918 lines \\(385 duplicated across languages\\)\n- After: ~1,405 lines total \\(includes inline JSON + rendering system\\)\n- Pure HTML/CSS: ~465 lines \\(instead of 918\\)\n- Rendering system: ~320 lines JavaScript \\(reusable\\)\n- Content JSON: ~590 lines \\(easy to edit/extend\\)\n\n### Adding New Sections\nTo add a new section, simply add to the contentData.sections array:\n\n```javascript\n{\n  id: \"new-section-id\",\n  type: \"content\",  // or \"card-grid\", \"cta\"\n  order: 7,  // Controls position\n  title: { en: \"Title\", es: \"TÃ­tulo\" },\n  content: [\n    { type: \"paragraph\", text: { en: \"...\", es: \"...\" } },\n    { type: \"list\", items: { en: [...], es: [...] } },\n    // ... more content items\n  ]\n}\n```\n\nNo HTML changes needed!\n\n### Future Extensibility\n- Plugin system for registering custom content types\n- Support for adding new section layouts without code changes\n- Extensible renderer architecture for specialized components\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(psql:*)",
      "Bash(systemctl status:*)",
      "Bash(git add public/youtube-playlist.html)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: Fix Videorama page not rendering playlists - consolidate DOMContentLoaded listeners\n\nIssue: Playlists were not displaying on the music-collections page due to multiple\nconflicting DOMContentLoaded event listeners causing initialization race conditions.\n\nChanges:\n- Consolidated 4 DOMContentLoaded listeners into single unified initialization\n- Moved all Materialize component initialization to main listener\n- Added proper async/await for renderPlaylists\\(\\) and renderFavorites\\(\\)\n- Moved video player initialization into main DOMContentLoaded handler\n- Removed duplicate event listeners that were preventing render\n\nThis ensures:\nâœ… Page loads and initializes correctly\nâœ… Playlists render immediately after page loads\nâœ… All Materialize components initialized before rendering\nâœ… No race conditions between listeners\nâœ… Proper async data loading before UI updates\n\nThe Emotional Rollercoaster playlist now displays correctly on:\n- https://pnptv.app/music-collections\n- All filter chips work properly\n- Favorites tab functions correctly\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(postgres --version:*)",
      "Bash(curl -s http://localhost:3000/music-collections)",
      "Bash(node scripts/broadcast-venezuela-via-bot.js:*)",
      "Bash(node scripts/broadcast-venezuela-direct.js:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Implement group-only /menu command with restricted options and command blocking\n\n- Add GROUP_MENU configuration with Subscribe to PRIME, Nearby, PNPtv Main Room, Support\n- Display subscription plans in group /menu with pricing and features\n- Add ''Go to Bot for all options'' button at end of group menu\n- Create groupCommandRestriction middleware to block all commands except /menu in groups\n- Delete all non-/menu command messages automatically in groups\n- Add handlers for view_plans, main_room, and nearby menu options\n- Support bilingual UI \\(English/Spanish\\) for all group menu features\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git diff-index:*)",
      "Bash(sudo pg_isready:*)",
      "Bash(xargs kill -9)"
    ],
    "deny": [],
    "ask": []
  }
}
