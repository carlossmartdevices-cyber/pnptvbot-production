{
  "permissions": {
    "allow": [
      "Bash(echo:*)",
      "Bash(cat:*)",
      "Bash(npm run)",
      "Bash(git -C /root/pnptvbot-production submodule status)",
      "Bash(rm:*)",
      "Bash(pm2 list:*)",
      "Bash(npm install)",
      "Bash(npm install:*)",
      "Bash(pm2 logs:*)",
      "Bash(node:*)",
      "Bash(pm2 restart:*)",
      "Bash(pm2 delete:*)",
      "Bash(pm2 start:*)",
      "Bash(netstat:*)",
      "Bash(PGPASSWORD='Apelo801050#' psql:*)",
      "Bash(PGPASSWORD='Apelo801050#' psql -h localhost -p 55432 -U pnptvbot -d pnptvbot -c \"SHOW password_encryption;\")",
      "Bash(pm2 status:*)",
      "Bash(pm2 save:*)",
      "Bash(curl:*)",
      "Bash(openssl s_client:*)",
      "Bash(openssl x509:*)",
      "Bash(certbot --version:*)",
      "Bash(ln:*)",
      "Bash(nginx -t:*)",
      "Bash(systemctl reload:*)",
      "Bash(nslookup:*)",
      "Bash(dig:*)",
      "Bash(certbot certificates:*)",
      "Bash(certbot certonly:*)",
      "Bash(whois:*)",
      "Bash(chmod:*)",
      "Bash(/tmp/check-dns-and-get-ssl.sh:*)",
      "Bash(git push:*)",
      "Bash(git pull:*)",
      "Bash(git fetch:*)",
      "Bash(git merge:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(npm test:*)",
      "Bash(env)",
      "Bash(ls:*)",
      "Bash(ping:*)",
      "Bash(git config:*)",
      "Bash(git remote set-url:*)",
      "Bash(git branch:*)",
      "Bash(grep:*)",
      "Bash(pm2 show:*)",
      "Bash(python3:*)",
      "Bash(wc:*)",
      "Bash(npm start)",
      "Bash(pm2 kill:*)",
      "Bash(lsof:*)",
      "Bash(timeout 10 curl:*)",
      "Bash(for file in /root/pnptvbot-production/src/bot/api/routes.js /root/pnptvbot-production/src/bot/api/controllers/paymentController.js)",
      "Bash(do echo \"Checking $file...\")",
      "Bash(done)",
      "Bash(for file in /root/pnptvbot-production/src/bot/services/confirmationTokenService.js /root/pnptvbot-production/src/bot/services/paymentNotificationService.js /root/pnptvbot-production/src/bot/services/paymentService.js)",
      "Bash(timeout 5 curl:*)",
      "Bash(pm2 --version:*)",
      "Bash(timeout 15 node:*)",
      "Bash(git checkout:*)",
      "Bash(timeout 10 node:*)",
      "Bash(find:*)",
      "Bash(tree:*)",
      "Bash(for path in \"/\" \"/index.html\" \"/pnptvvideorooms\" \"/pnptvvideorooms/\" \"/app\" \"/app/\")",
      "Bash(do)",
      "Bash(pm2 info:*)",
      "Bash(nginx -T:*)",
      "Bash(readlink:*)",
      "Bash(sudo cp:*)",
      "Bash(sudo rm:*)",
      "Bash(sudo ln:*)",
      "Bash(sudo nginx:*)",
      "Bash(sudo systemctl reload:*)",
      "Bash(sudo systemctl status:*)",
      "Bash(sudo tail:*)",
      "Bash(pm2 stop:*)",
      "Bash(export NODE_ENV=production)",
      "Bash(export NODE_OPTIONS=\"--max-old-space-size=4096\")",
      "Bash(xargs ls:*)",
      "Bash(PGPASSWORD='Apelo bryant-pass-data.md' psql:*)",
      "Bash(scp:*)",
      "Bash(ssh-keyscan:*)",
      "Bash(~/.ssh/known_hosts)",
      "Bash(timeout 120 node:*)",
      "Bash(timeout 60 node:*)",
      "Bash(npm run build:*)",
      "Bash(apt-get update:*)",
      "Bash(apt-get install:*)",
      "Bash(expect:*)",
      "Bash(apt --fix-broken install:*)",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"sudo ufw allow 80/tcp && sudo ufw allow 443/tcp && echo ''Ports opened''\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"dig videorooms.pnptv.app +short && nslookup videorooms.pnptv.app 8.8.8.8 | grep -i ''address\\\\|name''\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"tail -50 /var/log/letsencrypt/letsencrypt.log | grep -A5 -B5 ''No such authorization\\\\|malformed''\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"rm -rf /etc/letsencrypt/accounts/* && certbot certonly --standalone -d videorooms.pnptv.app --email admin@pnptv.app --agree-tos --no-eff-email --non-interactive --preferred-challenges http 2>&1 | head -40\")",
      "Bash(sudo certbot certonly:*)",
      "Bash(sshpass -p 'Apelo801050\\)' scp -r -o StrictHostKeyChecking=no /etc/letsencrypt/live/videorooms.pnptv.app root@148.230.80.210:/etc/letsencrypt/live/)",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"mkdir -p /etc/letsencrypt/live && mkdir -p /etc/letsencrypt/archive && echo ''Directories created''\")",
      "Bash(sshpass -p 'Apelo801050\\)' scp -r -o StrictHostKeyChecking=no /etc/letsencrypt/live/videorooms.pnptv.app/ root@148.230.80.210:/etc/letsencrypt/live/videorooms.pnptv.app)",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"ls -la /etc/letsencrypt/live/videorooms.pnptv.app/\")",
      "Bash(sshpass -p 'Apelo801050\\)' ssh -o StrictHostKeyChecking=no root@148.230.80.210 \"netstat -tuln 2>/dev/null | grep 8080 || ss -tuln 2>/dev/null | grep 8080\")",
      "Bash(ss:*)",
      "Bash(source .env)",
      "Bash(pkill:*)",
      "Bash(npm cache clean:*)",
      "Bash(pm2 startup:*)",
      "Bash(for url in \"https://pnptv.app/lifetime100\" \"https://pnptv.app/radio.html\" \"https://pnptv.app/community-room\" \"https://pnptv.app/age-verification-camera.html\")",
      "Bash(if curl -s \"$url\")",
      "Bash(then)",
      "Bash(else)",
      "Bash(fi)",
      "Bash(source /root/pnptvbot-production/.env)",
      "Bash(for file in /root/pnptvbot-production/public/{radio,age-verification-camera,checkout,community-room,design-reference,index,lifetime-pass,youtube-playlist}.html)",
      "Bash(if grep -q \"font-family.*--font-title\" \"$file\")",
      "Bash(xargs kill:*)",
      "Bash(~/.ssh/authorized_keys)",
      "Bash(~/.git-credentials)",
      "Bash(git log:*)",
      "Bash(FILTER_BRANCH_SQUELCH_WARNING=1 git filter-branch:*)",
      "Bash(python3 -m pip install:*)",
      "Bash(xargs:*)",
      "Bash(__NEW_LINE__ grep -n \"REDIS_PASSWORD\\\\|SENDGRID_API_KEY\\\\|SMTP_PASSWORD\" /root/pnptvbot-production/.env)",
      "Bash(node scripts/send-video-room-broadcast.js:*)",
      "Bash(pg_isready:*)",
      "Bash(PGPASSWORD=\"Apelo801050#\" psql:*)",
      "Bash(node scripts/send-broadcast-auto.js:*)",
      "Bash(zcat:*)",
      "Bash(node -c:*)",
      "Bash(curl -s https://pnptv.app/community-room)",
      "Bash(sudo systemctl restart:*)",
      "Bash(npm run apply-hangouts-schema:*)",
      "Bash(node scripts/apply-hangouts-schema.js:*)",
      "Bash(kill:*)",
      "Bash(tail:*)",
      "Bash(cp:*)",
      "Bash(docker logs:*)",
      "Bash(docker build:*)",
      "Bash(docker stop:*)",
      "Bash(docker run:*)",
      "Bash(docker rm:*)",
      "Bash(curl -s https://pnptv.app/community-features.html)",
      "Bash(npm run lint:*)",
      "Bash(npm run test:unit:*)",
      "Bash(docker-compose down:*)",
      "Bash(docker-compose up:*)",
      "Bash(docker-compose ps:*)",
      "Bash(docker-compose logs:*)",
      "Bash(git hash-object:*)",
      "Bash(git update-index:*)",
      "Bash(touch:*)",
      "Bash(npm ci)",
      "Bash(test -f:*)",
      "Bash(test:*)",
      "Bash(\\\\\\) -exec ls -lh {} ;)",
      "Bash(node --version:*)",
      "Bash(node scripts/setupAsyncQueue.js:*)",
      "Bash(node scripts/verifyDeployment.js:*)",
      "Bash(target\"\n- Supports 4 button types: URL links, plan references, bot commands, and feature shortcuts\n- Buttons integrated throughout broadcast flow \\(Step 4/5 configuration\\)\n\n**Database Schema:**\n- broadcast_button_presets: Stores pre-configured button sets with JSONB storage\n- broadcast_buttons: Per-broadcast button mappings with full indexing\n- 3 optimized indexes for performance\n\n**Admin Handler Updates:**\n- New action handlers for preset selection \\(regex pattern\\)\n- No-buttons option handler\n- Custom buttons builder entry point\n- Custom button text input parser \\(validates format, type, target\\)\n- Send/schedule with buttons handlers\n- sendBroadcastWithButtons\\(\\) function for dynamic Telegram inline keyboard rendering\n\n**Button Type Support:**\n- URL: External web links with HTTP/HTTPS validation\n- Command: Bot commands starting with / \\(e.g., /plans, /support\\)\n- Plan: Direct plan references \\(e.g., premium, gold\\)\n- Feature: App feature shortcuts \\(e.g., features, nearby\\)\n\n**Validation & Safety:**\n- Format validation for all button entries\n- URL scheme validation \\(http/https required\\)\n- Command prefix validation \\(/ required\\)\n- Button text length limits \\(64 chars max\\)\n- Type validation against allowed values\n- Graceful error messaging for admin guidance\n\n**User Experience Flow:**\n1. After Spanish text input \\(Step 3/4\\)\n2. Shows button configuration menu \\(Step 4/5\\)\n3. Admin can select preset or build custom buttons\n4. Custom buttons parsed as admin enters each one\n5. Real-time confirmation with button count\n6. Buttons sent with broadcast to all users\n7. Completion report includes button statistics\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /root/pnptvbot-production status)",
      "Bash(git -C /root/pnptvbot-production diff)",
      "Bash(git -C /root/pnptvbot-production log --oneline -5)",
      "Bash(git -C /root/pnptvbot-production add src/bot/handlers/payments/index.js)",
      "Bash(git -C /root/pnptvbot-production commit -m \"$\\(cat <<''EOF''\nfeat: Remove PayPal as payment method\n\nPayPal has been removed from the available payment options. Users will\nnow only see ePayco and Daimo \\(crypto\\) as payment methods when subscribing.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /root/pnptvbot-production log:*)",
      "Bash(git -C /root/pnptvbot-production push)",
      "Bash(git -C /root/pnptvbot-production add public/paypal-checkout.html src/bot/api/controllers/paymentController.js src/bot/api/controllers/webhookController.js src/bot/api/routes.js src/bot/services/confirmationTokenService.js src/bot/services/paymentNotificationService.js src/bot/services/paymentService.js src/bot/services/paypalService.js src/utils/i18n.js src/validation/schemas/payment.schema.js)",
      "Bash(git -C /root/pnptvbot-production commit -m \"$\\(cat <<''EOF''\nchore: Remove PayPal service and all related code\n\n- Delete paypalService.js and paypal-checkout.html\n- Remove PayPal webhook handler from webhookController.js\n- Remove PayPal API routes \\(create-order, capture-order\\)\n- Remove PayPal provider handling from paymentService.js\n- Remove PayPal from paymentController.js\n- Update i18n translations to remove PayPal references\n- Update payment schema validation to exclude PayPal\n- Clean up PayPal references in notification and token services\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npm uninstall:*)",
      "Bash(git -C /root/pnptvbot-production add:*)",
      "Bash(git -C /root/pnptvbot-production commit -m \"$\\(cat <<''EOF''\nchore: Remove PayPal SDK dependency\n\nUninstall @paypal/checkout-server-sdk as PayPal payment method\nhas been removed from the application.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /root/pnptvbot-production commit -m \"$\\(cat <<''EOF''\nchore: Add Grok API configuration to .env.example\n\nAdd GROK_API_KEY and GROK_MODEL environment variables for\nX.AI Grok integration used in broadcast/post text generation.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /root/pnptvbot-production commit -m \"$\\(cat <<''EOF''\ntest: Remove PayPal tests after payment method removal\n\n- Remove PayPal test cases from paymentMethods.test.js\n- Remove PayPal test from paymentNotification.test.js\n- Remove PayPal service mock from webhookController.test.js\n- Update transaction ID in paymentNotificationSimple.test.js\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(psql:*)",
      "Bash(node -e:*)",
      "Bash(journalctl:*)",
      "Bash(node scripts/run-membership-cleanup.js:*)",
      "Bash(NODE_OPTIONS=\"--dns-result-order=ipv4first\" node:*)",
      "Bash(sudo -u postgres psql:*)",
      "Bash(systemctl status:*)",
      "Bash(pm2 flush:*)",
      "Bash(timeout 90 grep:*)",
      "Bash(killall:*)",
      "Bash(found\" and \"not a member\" cases\n\n4. easybots.store blocking - Restored comprehensive content blocking middleware \n   to prevent easybots.store from accessing PNPtv static files and routes, \n   ensuring it only displays the EasyBots landing page\n\nAll fixes deployed and tested in production.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(pm2 reload:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nFix validation error for locationSharingEnabled toggle\n\nAdd locationSharingEnabled field to userProfileUpdate schema to allow\ntoggling location sharing from the nearby menu.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nUpdate Claude Code local settings\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(PGPASSWORD=$POSTGRES_PASSWORD psql:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nFix private call booking database compatibility\n\n- Fix call_availability table queries to use integer id instead of string\n- Fix private_calls INSERT to include required caller_id and receiver_id columns\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(sudo ./deploy-pm2.sh)",
      "Bash(source:*)",
      "Bash(PGPASSWORD=\"$PG_PASSWORD\" psql:*)",
      "Bash(yt-dlp:*)",
      "Bash(pip install:*)",
      "Bash(redis-cli:*)",
      "Bash(timeout 60 tail:*)",
      "Bash(systemctl restart:*)",
      "Bash(timeout 30 tail:*)",
      "Bash(node scripts/send-failed-payment-promo.js:*)",
      "WebSearch",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Add CashApp, Venmo, Zelle, Wise payment options to Daimo\n\n- Explicitly list payment apps for mobile compatibility \\(AllPaymentApps is desktop-only\\)\n- Added: CashApp, Venmo, Zelle, Wise, Revolut, MercadoPago, Coinbase, Binance\n- Added promo broadcast script for failed payment users\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nchore: Remove unused how-to-use.html page\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "WebFetch(domain:docs.daimo.com)",
      "WebFetch(domain:github.com)",
      "Bash(npm show:*)",
      "Bash(node --check:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nFix PaymentService.sendPrimeConfirmation and add how-to-use page\n\n- Move sendPrimeConfirmation from standalone function to static class method\n  to fix \"PaymentService.sendPrimeConfirmation is not a function\" error\n- Remove duplicate orphaned function code outside the class\n- Add public/how-to-use.html page to fix 404 errors on /how-to-use route\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(bash -)",
      "Bash(ssh-add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nOptimize Grok service for broadcasts and posts\n\n- Add retry logic with exponential backoff for transient API errors\n- Implement mode-specific temperature and token configurations\n- Cache system prompts per mode/language combination\n- Add parallel bilingual generation \\(generateSharePost, generateBilingual\\)\n- Condense system prompts by ~60% while maintaining brand voice\n- Add output sanitization to remove LLM artifacts\n- Improve error handling with detailed logging and attempt tracking\n- Update handlers to use optimized hasMedia parameter for automatic token calculation\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nðŸ”§ PRIME Channel & Grok Improvements\n\n- PRIME channel 100% clean: block ALL bot messages, silent redirects\n- Grok output now clean \\(no labels like TITLE:, HOOK:, CTA:\\)\n- Grok instructions always in Spanish, output in requested language\n- Added concrete examples for broadcast and sharePost modes\n- Added hasFullAccess\\(\\) and isAdminUser\\(\\) for admin pre-launch testing\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nðŸ”„ Session updates: handlers, services, models\n\n- Updated payment handlers and services\n- Updated user handlers \\(menu, onboarding, hangouts, pnpLive\\)\n- Updated admin handlers\n- Updated models \\(user, radio\\)\n- Updated lifetime-pass.html with new Meru links\n- Config updates\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(top:*)",
      "Bash(git -C /root/pnptvbot-production show HEAD -- src/bot/handlers/user/pnpLiveHandler.js)",
      "Bash(git -C /root/pnptvbot-production diff --stat)",
      "Bash(git -C /root/pnptvbot-production log --oneline -3)",
      "Bash(git -C /root/pnptvbot-production diff src/bot/handlers/admin/index.js src/bot/handlers/user/profile.js)",
      "Bash(PGPASSWORD='Apelo801050#' psql -U pnptvbot -d pnptvbot -h localhost -c \"SELECT COUNT\\(*\\) as total_tickets, COUNT\\(*\\) FILTER \\(WHERE status = ''open''\\) as open_tickets FROM support_topics;\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nchore: Update Claude Code local settings\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(node scripts/export-unified-users.js:*)",
      "Bash(node scripts/import-unmatched-legacy-users.js:*)",
      "Bash(node scripts/send-welcome-to-active-subscribers.js:*)",
      "Bash(PGPASSWORD='Apelo801050#' psql -h localhost -U pnptvbot -d pnptvbot -c \"SELECT id, name, display_name, price, duration_days, active, is_lifetime FROM plans ORDER BY price;\")",
      "Bash(__NEW_LINE_bedf0833f6cd6c69__ echo \"\")",
      "Bash(git show:*)",
      "Bash(timeout 2 cat:*)",
      "Bash(git tag:*)"
    ],
    "deny": [],
    "ask": []
  }
}
